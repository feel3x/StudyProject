<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Computer Components Order Form - Workbook Assignment #6</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        option {
            border: .1px solid lightblue;
            border-radius: 4px;
            margin-top: 5px;
        }
    </style>

</head>

<body class="bg-dark bg-gradient text-white">

    <div class="container">
        <div class="py-2 mb-3 text-center bg-secondary text-light">
            <h2>Computer Components Order</h2>
            <p class="lead">Order all the necessary computer components online right from your home.</p>
        </div>
        <div class="row align-items-top justify-content-center">
            <!-- Left Column: Options to filter available products. -->
            <div class="col-md-2 m-1">
                <div class="row mb-3">
                    <h5 class="text-muted" for="products_selector">Filter</h5>
                    <select onchange="fillAvailableProducts()" id="products_selector"
                        class="custom-select d-block w-100 h-100" size="3" required>
                        <option value="Motherboard" selected>Motherboards</option>
                        <option value="RAM">RAM</option>
                        <option value="Hard-Drive">Hard-Drives</option>
                        <option value="Monitor">Monitors</option>
                        <option value="Graphics Card">Graphics Cards</option>
                        <option value="Network Card">Network Cards</option>
                        <option value="Power Supply">Power Supplies</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="row mb-3">
                    <h5 class="text-muted" for="products_selector">More Filters</h5>
                    <select class="custom-select d-block w-100 h-100" size="3" required>
                        <option value="Motherboard">Filter Example</option>
                        <option value="RAM">Filter Example</option>
                        <option value="Hard-Drive">Filter Example</option>
                    </select>
                </div>
            </div>
            <!-- Middle Column: Available products. -->
            <div class="col-md-6 m-1">
                <!-- Products Container-->
                <div class="container">
                    <h5 class="text-muted" id="available_products_label" for="available_products_selector">Available
                    </h5>
                    <ul id="available_products_selector" class="list-group mb-3 text-dark">

                    </ul>
                </div>
            </div>
            <!-- Right Column: Shopping Cart.-->
            <div class="col-md-3 m-1">
                <!-- Shopping Cart Container -->
                <div class="container">
                    <h5 class="d-flex justify-content-between align-items-center">
                        <span class="text-muted">Your cart</span>
                        <span id="productsInCartCounter" class="badge badge-secondary badge-pill">0</span>
                    </h5>
                    <ul id="shoppingCartElements" class="list-group mb-3 text-dark">

                        <li class="list-group-item d-flex justify-content-between">
                            <span>Shopping Cart is empty.</span>
                        </li>
                    </ul>
                    <button class="btn btn-primary btn-md btn-block" type="submit"
                        onclick="scrollToTarget('billing')">Continue to billing</button>

                </div>
            </div>
        </div>
        <hr class="mb-4">

        <div class="row">
            <div class="container">
                <a id="billing"></a>
                <!-- Billing Information -->
                <h4 class="mb-3 text-muted">Billing address</h4>
                <form action="javascript:alert('Thank you for your order!')">
                    <div id="orderForm" class="row">
                        <div class="col-md-6 mb-3">
                            <label for="firstName">First name</label>
                            <input type="text" class="form-control" id="firstName" placeholder="" value="" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="lastName">Last name</label>
                            <input type="text" class="form-control" id="lastName" placeholder="" value="" required>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="email">Email</label>
                        <input type="email" class="form-control" id="email" placeholder="name@emailprovider.com">
                    </div>

                    <div class="mb-3">
                        <label for="address">Address</label>
                        <input type="text" class="form-control" id="address" placeholder="1234 Main St" required>
                    </div>

                    <div class="row">
                        <div class="col-md-5 mb-3">
                            <label for="country">Country</label>
                            <select class="custom-select d-block w-100" id="country" required>
                                <option value="">Choose...</option>
                                <option>United States</option>
                                <option>Germany</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="zip">Zip</label>
                            <input type="text" class="form-control" id="zip" placeholder="" required>
                        </div>
                    </div>
                    <hr class="mb-4">
                    <!-- Payment Form -->
                    <h4 class="mb-3 text-muted">Payment</h4>

                    <div class="d-block my-3">
                        <div class="custom-control custom-radio">
                            <input id="credit" name="paymentMethod" type="radio" class="custom-control-input" checked
                                required>
                            <label class="custom-control-label" for="credit">Credit card</label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input id="debit" name="paymentMethod" type="radio" class="custom-control-input" required>
                            <label class="custom-control-label" for="debit">Debit card</label>
                        </div>
                        <div class="custom-control custom-radio">
                            <input id="paypal" name="paymentMethod" type="radio" class="custom-control-input" required>
                            <label class="custom-control-label" for="paypal">Paypal</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="cc-name">Name on card</label>
                            <input type="text" class="form-control" id="cc-name" placeholder="">
                            <small class="text-muted">Full name as displayed on card</small>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="cc-number">Credit card number</label>
                            <input type="text" class="form-control" id="cc-number" placeholder="">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <label for="cc-expiration">Expiration</label>
                            <input type="text" class="form-control" id="cc-expiration" placeholder="">
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="cc-cvv">CVV</label>
                            <input type="text" class="form-control" id="cc-cvv" placeholder="">
                        </div>
                    </div>
                    <hr class="mb-4">
                    <button class="btn btn-primary btn-lg btn-block" type="submit">Continue to checkout</button>
                </form>
            </div>
        </div>
        <!-- Footer information -->
        <footer class="my-5 pt-5 text-light text-center text-small bg-secondary">
            <p class="mb-1">&copy; 2017-2018 Company Name</p>
            <ul class="list-inline">
                <li class="list-inline-item"><a href="#" class="text-white">Privacy Policy</a></li>
                <li class="list-inline-item"><a href="#" class="text-white">Terms and Conditions</a></li>
                <li class="list-inline-item"><a href="#" class="text-white">About Us</a></li>
                <li class="list-inline-item"><a href="#" class="text-white">Impressum</a></li>

            </ul>
        </footer>
    </div>


    <script>
        //An array of all the sample products offered. Will be replaced by a database in real world implementation. 
        var arrayOfProducts = [{
            "id": 1,
            "Title": "MSI B450 TOMAHAWK MAX II",
            "Type": "Motherboard",
            "Price": "69.00",
            "Description": "This is a sample description about the product."
        }, {
            "id": 2,
            "Title": "AORUS X570 AORUS ELITE",
            "Type": "Motherboard",
            "Price": "173.42",
            "Description": "This is a sample description about the product."
        }, {
            "id": 3,
            "Title": "16GB G.Skill Aegis DDR4-3200 DIMM CL16 Dual Kit",
            "Type": "RAM",
            "Price": "69.77",
            "Description": "This is a sample description about the product."
        }, {
            "id": 3,
            "Title": "4GB G.Skill Aegis DDR4-3200 DIMM CL16 Dual Kit",
            "Type": "RAM",
            "Price": "69.77",
            "Description": "This is a sample description about the product."
        }, {
            "id": 3,
            "Title": "8GB G.Skill Aegis DDR4-3200 DIMM CL16 Dual Kit",
            "Type": "RAM",
            "Price": "69.77",
            "Description": "This is a sample description about the product."
        }, {
            "id": 4,
            "Title": "8GB Patriot Viper 3 Series Black Mamba DDR3-1600 DIMM CL9 Dual Kit",
            "Type": "RAM",
            "Price": "41.66",
            "Description": "This is a sample description about the product."
        }, {
            "id": 4,
            "Title": "16GB Patriot Viper 3 Series Black Mamba DDR3-1600 DIMM CL9 Dual Kit",
            "Type": "RAM",
            "Price": "41.66",
            "Description": "This is a sample description about the product."
        }, {
            "id": 4,
            "Title": "4GB Patriot Viper 3 Series Black Mamba DDR3-1600 DIMM CL9 Dual Kit",
            "Type": "RAM",
            "Price": "41.66",
            "Description": "This is a sample description about the product."
        }, {
            "id": 5,
            "Title": "LOGITECH M185 Mouse, Grey",
            "Type": "Other",
            "Price": "12.99",
            "Description": "This is a sample description about the product."
        }, {
            "id": 6,
            "Title": "Roccat Vulcan 121 AIMO, Gaming-Keyboard ",
            "Type": "Other",
            "Price": "114.90",
            "Description": "This is a sample description about the product."
        }, {
            "id": 7,
            "Title": "HP M27f 27 inch Full-HD Monitor",
            "Type": "Monitor",
            "Price": "185.00",
            "Description": "This is a sample description about the product."
        }, {
            "id": 8,
            "Title": "Intenso Top Performance SSD 256GB 2.5 Zoll SATA",
            "Type": "Hard-Drive",
            "Price": "28.49",
            "Description": "This is a sample description about the product."
        }, {
            "id": 9,
            "Title": "Intenso Memory Case 2TB Schwarz - external HDD, ",
            "Type": "Hard-Drive",
            "Price": "57.00",
            "Description": "This is a sample description about the product."
        }, {
            "id": 10,
            "Title": "PEAQ PMO Slim S320 32 inch WQHD Monitor",
            "Type": "Monitor",
            "Price": "219.00",
            "Description": "This is a sample description about the product."
        }, {
            "id": 11,
            "Title": "EVGA GeForce RTX 3070 Ti FTW3 ULTRA GAMING LHR",
            "Type": "Graphics Card",
            "Price": "969.00",
            "Description": "This is a sample description about the product."
        }, {
            "id": 12,
            "Title": "GIGABYTE GeForce GTX 1660 Ti OC 6G",
            "Type": "Graphics Card",
            "Price": "429.98",
            "Description": "This is a sample description about the product."
        }, {
            "id": 13,
            "Title": "Inter-Tech DMG-35",
            "Type": "Network Card",
            "Price": "24.55",
            "Description": "This is a sample description about the product."
        }, {
            "id": 14,
            "Title": "TP-Link Archer T4E",
            "Type": "Network Card",
            "Price": "24.90",
            "Description": "This is a sample description about the product."
        }, {
            "id": 15,
            "Title": "Corsair CX750F RGB",
            "Type": "Power Supply",
            "Price": "85.90",
            "Description": "This is a sample description about the product."
        }, {
            "id": 16,
            "Title": "Fractal Design ION+ 660P 660W",
            "Type": "Power Supply",
            "Price": "84.90",
            "Description": "This is a sample description about the product."
        }]

        var productsInShoppingCart = []; //List of elements in the shopping cart.
        var hiddenInputsCreated = []; //List of hidden form inputs created, containing the id of elements in the shopping cart.

        //Filling the page with available products at runtime with the intial settings. 
        window.onload = function () {
            fillAvailableProducts();
        }

        /**
 * Filling products container with available products.
 *
 * Function to fill the products container with available products according to used filters.
 */
        function fillAvailableProducts() {
            //Clear all available products shown
            var selectBox = document.getElementById("available_products_selector");
            for (var i = selectBox.childNodes.length - 1; i >= 0; --i) {
                selectBox.childNodes[i].remove();
            }


            //Get the chosen type value and fill available products select box with products from the productsarray.
            var chosenType = document.getElementById("products_selector").value;

            //Loop through the array of products and find matching type of the type-filter. 
            for (var i = 0; i < arrayOfProducts.length; i++) {
                var product = arrayOfProducts[i];
                if (product.Type == chosenType) {
                    //creating a new HTML element to show a new product with its contents. 
                    var newElement = document.createElement("div");
                    newElement.innerHTML = '<li class="list-group-item d-flex justify-content-between mb-3"><div><b>' + product.Title + '</b><br>' + product.Description + '</div><div align="right"><b>$' + product.Price + '</b> <br><button class="btn btn-primary btn-sm btn-block" type="submit" onclick="addProductToCart(' + i + ')">add&nbsp;to&nbsp;Cart</button></div></li>'
                    //appending the new element to the page.
                    document.getElementById("available_products_selector").appendChild(newElement);
                }
            }
            //Updating the headline of the products container. 
            document.getElementById("available_products_label").innerHTML = "Available " + chosenType + "s:";
        }

        /**
* Adds a prduct to cart.
*
* Adds a product from the array of products by the given index to the cart.
*
* @param {int}    index                     The index of the product in the array of products. 
*/
        function addProductToCart(index) {
            //Find the product by index.
            var product = arrayOfProducts[index];
            //Add the product to the list. 
            productsInShoppingCart.push(product);
            //Creating the HTML elements in a seperate function
            listProductsInCart();
        }

        /**
* Listing the products in cart to page.
*
* Creates and adds the HTML elements for all the products in the shopping cart list.
*/
        function listProductsInCart() {
            var shoppingCartList = document.getElementById("shoppingCartElements");
            //deleting current content of the shopping cart container.
            shoppingCartList.innerHTML = "";
            //deleting hidden inputs previously created. 
            for (var i = 0; i < hiddenInputsCreated.length; i++) {
                hiddenInputsCreated[i].remove();
            }
            //declaring variable for sum of shopping cart. 
            var totalUSD = +0;
            //Show aternative message if the shopping cart is empty. 
            if (productsInShoppingCart.length < 1) {
                shoppingCartList.innerHTML = '   <li class="list-group-item d-flex justify-content-between"><span>Shopping Cart is empty.</span></li>';
            }
            else {
                //loop through all the products in the shopping cart list.
                for (var i = 0; i < productsInShoppingCart.length; i++) {
                    totalUSD += +productsInShoppingCart[i].Price; //Add the price to the sum of the shopping cart. 
                    //Create and add new HTML element containing the product and its contents to the shopping cart container. 
                    shoppingCartList.innerHTML += '<li id="productInShoppingCartId' + productsInShoppingCart[i].id + '" class="list-group-item d-flex justify-content-between lh-condensed"><a href="javascript:removeProductFromCart(' + i + ')" class="text-danger align-middle mr-2">X</a><div><h6 class="my-0">' + productsInShoppingCart[i].Title + '</h6></div><span class="text-muted">$' + productsInShoppingCart[i].Price + '</span></li>';
                    //Add a new hidden input for each product, containing the id of the product for further processing of this form. 
                    var newHiddenInput = document.createElement("input");
                    newHiddenInput.setAttribute("type", "hidden");
                    newHiddenInput.setAttribute("name", "orderedProductIds[]");
                    newHiddenInput.setAttribute("id", "hiddenInputIndex" + i);
                    newHiddenInput.setAttribute("value", productsInShoppingCart[i].id);
                    document.getElementById("orderForm").appendChild(newHiddenInput);
                    hiddenInputsCreated.push(newHiddenInput); //Add this element to the hidden inputs created list, to be able to delete in again later. 
                }
                totalUSD = Math.round((totalUSD + Number.EPSILON) * 100) / 100 //Round the shopping cart sum to two decimals. 
                //Update the shopping cart sum. 
                shoppingCartList.innerHTML += '<li class="list-group-item d-flex justify-content-between"><span>Total (USD)</span><strong>$' + totalUSD + '</strong></li>';
            }
            //Update shopping cart counter. 
            document.getElementById("productsInCartCounter").innerHTML = productsInShoppingCart.length;
        }
        /**
  * Removes a product from cart.
  *
  * Removes a product from the cart by the given index of the products in shopping cart list.
  *
  * @param {int}    index                     The index of the product in the products in shopping cart list. 
  */
        function removeProductFromCart(index) {
            if (index > -1) {
                //Remove hidden input from form.
                document.getElementById("hiddenInputIndex" + index).remove();

                //Remove product from products in shopping cart list. 
                productsInShoppingCart.splice(index, 1);
            }
            //Relist products in cart
            listProductsInCart();
        }
        /**
  * Scroll to a target element.
  *
  * Scrolls the page to an element with the targetId.
  *
  * @param {int}    targetId                     The id of the target element. 
  */
        function scrollToTarget(targetId) {
            document.getElementById(targetId).scrollIntoView({
                behavior: 'smooth'
            });
        }
    </script>
</body>

</html>